require 'json'

@forecast = JSON.parse('{"latitude":37.8267,"longitude":-122.423,"timezone":"America/Los_Angeles","offset":-7,"currently":{"time":1467054254,"summary":"Clear","icon":"clear-day","nearestStormDistance":329,"nearestStormBearing":135,"precipIntensity":0,"precipProbability":0,"temperature":65.48,"apparentTemperature":65.48,"dewPoint":50.24,"humidity":0.58,"windSpeed":8.56,"windBearing":271,"visibility":9.44,"cloudCover":0.06,"pressure":1015.92,"ozone":296.97},"minutely":{"summary":"Clear for the hour.","icon":"clear-day","data":[{"time":1467054240,"precipIntensity":0,"precipProbability":0},{"time":1467054300,"precipIntensity":0,"precipProbability":0},{"time":1467054360,"precipIntensity":0,"precipProbability":0},{"time":1467054420,"precipIntensity":0,"precipProbability":0},{"time":1467054480,"precipIntensity":0,"precipProbability":0},{"time":1467054540,"precipIntensity":0,"precipProbability":0},{"time":1467054600,"precipIntensity":0,"precipProbability":0},{"time":1467054660,"precipIntensity":0,"precipProbability":0},{"time":1467054720,"precipIntensity":0,"precipProbability":0},{"time":1467054780,"precipIntensity":0,"precipProbability":0},{"time":1467054840,"precipIntensity":0,"precipProbability":0},{"time":1467054900,"precipIntensity":0,"precipProbability":0},{"time":1467054960,"precipIntensity":0,"precipProbability":0},{"time":1467055020,"precipIntensity":0,"precipProbability":0},{"time":1467055080,"precipIntensity":0,"precipProbability":0},{"time":1467055140,"precipIntensity":0,"precipProbability":0},{"time":1467055200,"precipIntensity":0,"precipProbability":0},{"time":1467055260,"precipIntensity":0,"precipProbability":0},{"time":1467055320,"precipIntensity":0,"precipProbability":0},{"time":1467055380,"precipIntensity":0,"precipProbability":0},{"time":1467055440,"precipIntensity":0,"precipProbability":0},{"time":1467055500,"precipIntensity":0,"precipProbability":0},{"time":1467055560,"precipIntensity":0,"precipProbability":0},{"time":1467055620,"precipIntensity":0,"precipProbability":0},{"time":1467055680,"precipIntensity":0,"precipProbability":0},{"time":1467055740,"precipIntensity":0,"precipProbability":0},{"time":1467055800,"precipIntensity":0,"precipProbability":0},{"time":1467055860,"precipIntensity":0,"precipProbability":0},{"time":1467055920,"precipIntensity":0,"precipProbability":0},{"time":1467055980,"precipIntensity":0,"precipProbability":0},{"time":1467056040,"precipIntensity":0,"precipProbability":0},{"time":1467056100,"precipIntensity":0,"precipProbability":0},{"time":1467056160,"precipIntensity":0,"precipProbability":0},{"time":1467056220,"precipIntensity":0,"precipProbability":0},{"time":1467056280,"precipIntensity":0,"precipProbability":0},{"time":1467056340,"precipIntensity":0,"precipProbability":0},{"time":1467056400,"precipIntensity":0,"precipProbability":0},{"time":1467056460,"precipIntensity":0,"precipProbability":0},{"time":1467056520,"precipIntensity":0,"precipProbability":0},{"time":1467056580,"precipIntensity":0,"precipProbability":0},{"time":1467056640,"precipIntensity":0,"precipProbability":0},{"time":1467056700,"precipIntensity":0,"precipProbability":0},{"time":1467056760,"precipIntensity":0,"precipProbability":0},{"time":1467056820,"precipIntensity":0,"precipProbability":0},{"time":1467056880,"precipIntensity":0,"precipProbability":0},{"time":1467056940,"precipIntensity":0,"precipProbability":0},{"time":1467057000,"precipIntensity":0,"precipProbability":0},{"time":1467057060,"precipIntensity":0,"precipProbability":0},{"time":1467057120,"precipIntensity":0,"precipProbability":0},{"time":1467057180,"precipIntensity":0,"precipProbability":0},{"time":1467057240,"precipIntensity":0,"precipProbability":0},{"time":1467057300,"precipIntensity":0,"precipProbability":0},{"time":1467057360,"precipIntensity":0,"precipProbability":0},{"time":1467057420,"precipIntensity":0,"precipProbability":0},{"time":1467057480,"precipIntensity":0,"precipProbability":0},{"time":1467057540,"precipIntensity":0,"precipProbability":0},{"time":1467057600,"precipIntensity":0,"precipProbability":0},{"time":1467057660,"precipIntensity":0,"precipProbability":0},{"time":1467057720,"precipIntensity":0,"precipProbability":0},{"time":1467057780,"precipIntensity":0,"precipProbability":0},{"time":1467057840,"precipIntensity":0,"precipProbability":0}]},"hourly":{"summary":"Partly cloudy tomorrow morning.","icon":"partly-cloudy-day","data":[{"time":1467054000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":65.07,"apparentTemperature":65.07,"dewPoint":50.1,"humidity":0.58,"windSpeed":8.42,"windBearing":270,"visibility":9.44,"cloudCover":0.05,"pressure":1015.94,"ozone":296.98},{"time":1467057600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":70.84,"apparentTemperature":70.84,"dewPoint":51.88,"humidity":0.51,"windSpeed":10.67,"windBearing":281,"visibility":9.48,"cloudCover":0.1,"pressure":1015.72,"ozone":296.83},{"time":1467061200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":73.02,"apparentTemperature":73.02,"dewPoint":52.99,"humidity":0.5,"windSpeed":11.41,"windBearing":287,"visibility":9.76,"cloudCover":0.1,"pressure":1015.44,"ozone":296.63},{"time":1467064800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":74.96,"apparentTemperature":74.96,"dewPoint":54.08,"humidity":0.48,"windSpeed":12.25,"windBearing":290,"visibility":9.86,"cloudCover":0.1,"pressure":1015.02,"ozone":296.31},{"time":1467068400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":77.17,"apparentTemperature":77.17,"dewPoint":55.47,"humidity":0.47,"windSpeed":12.85,"windBearing":292,"visibility":9.93,"cloudCover":0.11,"pressure":1014.54,"ozone":295.93},{"time":1467072000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":76.41,"apparentTemperature":76.41,"dewPoint":54.66,"humidity":0.47,"windSpeed":13.64,"windBearing":296,"visibility":10,"cloudCover":0.11,"pressure":1014.17,"ozone":295.61},{"time":1467075600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":74.08,"apparentTemperature":74.08,"dewPoint":53.28,"humidity":0.48,"windSpeed":13.86,"windBearing":300,"visibility":10,"cloudCover":0.12,"pressure":1013.98,"ozone":295.39},{"time":1467079200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":71.05,"apparentTemperature":71.05,"dewPoint":52.01,"humidity":0.51,"windSpeed":13.44,"windBearing":302,"visibility":10,"cloudCover":0.12,"pressure":1013.91,"ozone":295.22},{"time":1467082800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":67.87,"apparentTemperature":67.87,"dewPoint":51.12,"humidity":0.55,"windSpeed":12.6,"windBearing":302,"visibility":9.98,"cloudCover":0.13,"pressure":1013.94,"ozone":295.03},{"time":1467086400,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":64.89,"apparentTemperature":64.89,"dewPoint":50.86,"humidity":0.6,"windSpeed":11.23,"windBearing":301,"visibility":9.91,"cloudCover":0.14,"pressure":1014.11,"ozone":294.81},{"time":1467090000,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":62.71,"apparentTemperature":62.71,"dewPoint":50.47,"humidity":0.64,"windSpeed":10.36,"windBearing":302,"visibility":9.89,"cloudCover":0.15,"pressure":1014.36,"ozone":294.56},{"time":1467093600,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":60.97,"apparentTemperature":60.97,"dewPoint":50.17,"humidity":0.68,"windSpeed":9.41,"windBearing":302,"visibility":9.84,"cloudCover":0.23,"pressure":1014.52,"ozone":294.27},{"time":1467097200,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":59.81,"apparentTemperature":59.81,"dewPoint":50.17,"humidity":0.7,"windSpeed":8.93,"windBearing":300,"visibility":9.82,"cloudCover":0.18,"pressure":1014.49,"ozone":293.87},{"time":1467100800,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":58.95,"apparentTemperature":58.95,"dewPoint":50.09,"humidity":0.72,"windSpeed":8.65,"windBearing":299,"visibility":9.8,"cloudCover":0.27,"pressure":1014.37,"ozone":293.42},{"time":1467104400,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":57.97,"apparentTemperature":57.97,"dewPoint":49.91,"humidity":0.75,"windSpeed":8.14,"windBearing":298,"visibility":9.78,"cloudCover":0.21,"pressure":1014.25,"ozone":293.03},{"time":1467108000,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":56.97,"apparentTemperature":56.97,"dewPoint":49.45,"humidity":0.76,"windSpeed":7.5,"windBearing":298,"visibility":9.78,"cloudCover":0.3,"pressure":1014.14,"ozone":292.74},{"time":1467111600,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":55.59,"apparentTemperature":55.59,"dewPoint":48.84,"humidity":0.78,"windSpeed":7.11,"windBearing":298,"visibility":9.75,"cloudCover":0.23,"pressure":1014.03,"ozone":292.51},{"time":1467115200,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":54.65,"apparentTemperature":54.65,"dewPoint":48.89,"humidity":0.81,"windSpeed":6.63,"windBearing":297,"visibility":9.81,"cloudCover":0.32,"pressure":1014.01,"ozone":292.37},{"time":1467118800,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":54.16,"apparentTemperature":54.16,"dewPoint":48.84,"humidity":0.82,"windSpeed":6.27,"windBearing":295,"visibility":9.88,"cloudCover":0.32,"pressure":1014.16,"ozone":292.38},{"time":1467122400,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":56.27,"apparentTemperature":56.27,"dewPoint":50.73,"humidity":0.82,"windSpeed":6.12,"windBearing":292,"visibility":9.93,"cloudCover":0.32,"pressure":1014.4,"ozone":292.49},{"time":1467126000,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":59.12,"apparentTemperature":59.12,"dewPoint":52.22,"humidity":0.78,"windSpeed":6.13,"windBearing":289,"visibility":9.96,"cloudCover":0.38,"pressure":1014.6,"ozone":292.52},{"time":1467129600,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":61.28,"apparentTemperature":61.28,"dewPoint":52.75,"humidity":0.74,"windSpeed":6.21,"windBearing":283,"visibility":10,"cloudCover":0.36,"pressure":1014.76,"ozone":292.37},{"time":1467133200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":63.26,"apparentTemperature":63.26,"dewPoint":52.67,"humidity":0.68,"windSpeed":6.72,"windBearing":279,"visibility":10,"cloudCover":0.21,"pressure":1014.88,"ozone":292.15},{"time":1467136800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":65.5,"apparentTemperature":65.5,"dewPoint":52.71,"humidity":0.63,"windSpeed":7.34,"windBearing":276,"visibility":10,"cloudCover":0.19,"pressure":1014.88,"ozone":292},{"time":1467140400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":66.73,"apparentTemperature":66.73,"dewPoint":53.61,"humidity":0.63,"windSpeed":8.16,"windBearing":275,"visibility":10,"cloudCover":0.17,"pressure":1014.73,"ozone":291.94},{"time":1467144000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":70.09,"apparentTemperature":70.09,"dewPoint":56.2,"humidity":0.61,"windSpeed":9.1,"windBearing":275,"visibility":10,"cloudCover":0.14,"pressure":1014.47,"ozone":291.95},{"time":1467147600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":73.1,"apparentTemperature":73.1,"dewPoint":58.67,"humidity":0.61,"windSpeed":9.96,"windBearing":275,"visibility":10,"cloudCover":0.12,"pressure":1014.15,"ozone":292.02},{"time":1467151200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":74.83,"apparentTemperature":74.83,"dewPoint":60.27,"humidity":0.61,"windSpeed":10.5,"windBearing":276,"visibility":10,"cloudCover":0.11,"pressure":1013.81,"ozone":292.18},{"time":1467154800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":73.69,"apparentTemperature":73.69,"dewPoint":59.6,"humidity":0.61,"windSpeed":10.77,"windBearing":277,"visibility":10,"cloudCover":0.11,"pressure":1013.45,"ozone":292.4},{"time":1467158400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":71.53,"apparentTemperature":71.53,"dewPoint":58.43,"humidity":0.63,"windSpeed":10.73,"windBearing":278,"visibility":10,"cloudCover":0.11,"pressure":1013.18,"ozone":292.59},{"time":1467162000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":68.49,"apparentTemperature":68.49,"dewPoint":56.96,"humidity":0.67,"windSpeed":10.33,"windBearing":278,"visibility":10,"cloudCover":0.1,"pressure":1013.02,"ozone":292.74},{"time":1467165600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":65.17,"apparentTemperature":65.17,"dewPoint":55.56,"humidity":0.71,"windSpeed":9.64,"windBearing":278,"visibility":10,"cloudCover":0.08,"pressure":1012.92,"ozone":292.86},{"time":1467169200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":62.42,"apparentTemperature":62.42,"dewPoint":54.6,"humidity":0.76,"windSpeed":8.9,"windBearing":278,"visibility":10,"cloudCover":0.09,"pressure":1012.91,"ozone":292.93},{"time":1467172800,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":60.46,"apparentTemperature":60.46,"dewPoint":54.25,"humidity":0.8,"windSpeed":8.2,"windBearing":278,"visibility":10,"cloudCover":0.12,"pressure":1013.02,"ozone":292.9},{"time":1467176400,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":58.86,"apparentTemperature":58.86,"dewPoint":54.15,"humidity":0.84,"windSpeed":7.52,"windBearing":276,"visibility":10,"cloudCover":0.18,"pressure":1013.2,"ozone":292.81},{"time":1467180000,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":57.66,"apparentTemperature":57.66,"dewPoint":54.08,"humidity":0.88,"windSpeed":6.94,"windBearing":275,"visibility":10,"cloudCover":0.23,"pressure":1013.29,"ozone":292.74},{"time":1467183600,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":56.88,"apparentTemperature":56.88,"dewPoint":53.98,"humidity":0.9,"windSpeed":6.54,"windBearing":273,"visibility":8.89,"cloudCover":0.29,"pressure":1013.22,"ozone":292.67},{"time":1467187200,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":56.26,"apparentTemperature":56.26,"dewPoint":53.78,"humidity":0.91,"windSpeed":6.24,"windBearing":272,"visibility":7.35,"cloudCover":0.37,"pressure":1013.08,"ozone":292.61},{"time":1467190800,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":55.5,"apparentTemperature":55.5,"dewPoint":53.36,"humidity":0.92,"windSpeed":5.91,"windBearing":271,"visibility":6.04,"cloudCover":0.44,"pressure":1012.94,"ozone":292.66},{"time":1467194400,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0008,"precipProbability":0.01,"precipType":"rain","temperature":54.45,"apparentTemperature":54.45,"dewPoint":52.66,"humidity":0.94,"windSpeed":5.47,"windBearing":269,"visibility":5.15,"cloudCover":0.53,"pressure":1012.81,"ozone":292.91},{"time":1467198000,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0011,"precipProbability":0.02,"precipType":"rain","temperature":53.33,"apparentTemperature":53.33,"dewPoint":51.79,"humidity":0.95,"windSpeed":4.94,"windBearing":265,"visibility":4.49,"cloudCover":0.62,"pressure":1012.69,"ozone":293.28},{"time":1467201600,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0011,"precipProbability":0.02,"precipType":"rain","temperature":52.61,"apparentTemperature":52.61,"dewPoint":51.13,"humidity":0.95,"windSpeed":4.57,"windBearing":262,"visibility":4.2,"cloudCover":0.69,"pressure":1012.67,"ozone":293.64},{"time":1467205200,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0008,"precipProbability":0.01,"precipType":"rain","temperature":53.43,"apparentTemperature":53.43,"dewPoint":51.81,"humidity":0.94,"windSpeed":4.24,"windBearing":261,"visibility":4.35,"cloudCover":0.75,"pressure":1012.79,"ozone":293.98},{"time":1467208800,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":54.54,"apparentTemperature":54.54,"dewPoint":52.57,"humidity":0.93,"windSpeed":3.96,"windBearing":260,"visibility":4.86,"cloudCover":0.79,"pressure":1013.01,"ozone":294.31},{"time":1467212400,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":55.93,"apparentTemperature":55.93,"dewPoint":53.17,"humidity":0.9,"windSpeed":3.94,"windBearing":259,"visibility":5.66,"cloudCover":0.77,"pressure":1013.22,"ozone":294.5},{"time":1467216000,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":57.63,"apparentTemperature":57.63,"dewPoint":53.32,"humidity":0.86,"windSpeed":4.3,"windBearing":256,"visibility":6.95,"cloudCover":0.67,"pressure":1013.37,"ozone":294.46},{"time":1467219600,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":59.94,"apparentTemperature":59.94,"dewPoint":53.5,"humidity":0.79,"windSpeed":4.95,"windBearing":254,"visibility":8.51,"cloudCover":0.52,"pressure":1013.48,"ozone":294.29},{"time":1467223200,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":62.37,"apparentTemperature":62.37,"dewPoint":53.93,"humidity":0.74,"windSpeed":5.76,"windBearing":254,"visibility":9.67,"cloudCover":0.39,"pressure":1013.48,"ozone":294.13},{"time":1467226800,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":64.92,"apparentTemperature":64.92,"dewPoint":54.91,"humidity":0.7,"windSpeed":6.8,"windBearing":258,"visibility":10,"cloudCover":0.27,"pressure":1013.36,"ozone":293.97}]},"daily":{"summary":"No precipitation throughout the week, with temperatures falling to 64°F on Saturday.","icon":"clear-day","data":[{"time":1467010800,"summary":"Clear throughout the day.","icon":"clear-day","sunriseTime":1467031864,"sunsetTime":1467085023,"moonPhase":0.75,"precipIntensity":0,"precipIntensityMax":0,"precipProbability":0,"temperatureMin":52.25,"temperatureMinTime":1467028800,"temperatureMax":77.17,"temperatureMaxTime":1467068400,"apparentTemperatureMin":52.25,"apparentTemperatureMinTime":1467028800,"apparentTemperatureMax":77.17,"apparentTemperatureMaxTime":1467068400,"dewPoint":50.76,"humidity":0.68,"windSpeed":8.23,"windBearing":285,"visibility":9.02,"cloudCover":0.11,"pressure":1015.2,"ozone":296.19},{"time":1467097200,"summary":"Partly cloudy in the morning.","icon":"partly-cloudy-day","sunriseTime":1467118287,"sunsetTime":1467171423,"moonPhase":0.79,"precipIntensity":0,"precipIntensityMax":0,"precipProbability":0,"temperatureMin":54.16,"temperatureMinTime":1467118800,"temperatureMax":74.83,"temperatureMaxTime":1467151200,"apparentTemperatureMin":54.16,"apparentTemperatureMinTime":1467118800,"apparentTemperatureMax":74.83,"apparentTemperatureMaxTime":1467151200,"dewPoint":53.49,"humidity":0.72,"windSpeed":8.07,"windBearing":284,"visibility":9.96,"cloudCover":0.2,"pressure":1013.96,"ozone":292.58},{"time":1467183600,"summary":"Mostly cloudy until afternoon.","icon":"partly-cloudy-day","sunriseTime":1467204712,"sunsetTime":1467257821,"moonPhase":0.83,"precipIntensity":0.0002,"precipIntensityMax":0.0011,"precipIntensityMaxTime":1467201600,"precipProbability":0.02,"precipType":"rain","temperatureMin":52.61,"temperatureMinTime":1467201600,"temperatureMax":74.36,"temperatureMaxTime":1467241200,"apparentTemperatureMin":52.61,"apparentTemperatureMinTime":1467201600,"apparentTemperatureMax":74.36,"apparentTemperatureMaxTime":1467241200,"dewPoint":54.79,"humidity":0.8,"windSpeed":6.74,"windBearing":253,"visibility":8.18,"cloudCover":0.37,"pressure":1012.54,"ozone":294.73},{"time":1467270000,"summary":"Mostly cloudy until afternoon.","icon":"partly-cloudy-day","sunriseTime":1467291138,"sunsetTime":1467344217,"moonPhase":0.87,"precipIntensity":0.0001,"precipIntensityMax":0.0008,"precipIntensityMaxTime":1467298800,"precipProbability":0.01,"precipType":"rain","temperatureMin":51.76,"temperatureMinTime":1467284400,"temperatureMax":76.33,"temperatureMaxTime":1467327600,"apparentTemperatureMin":51.76,"apparentTemperatureMinTime":1467284400,"apparentTemperatureMax":76.33,"apparentTemperatureMaxTime":1467327600,"dewPoint":54.51,"humidity":0.77,"windSpeed":6.73,"windBearing":227,"visibility":10,"cloudCover":0.37,"pressure":1010.3,"ozone":297.59},{"time":1467356400,"summary":"Clear throughout the day.","icon":"clear-day","sunriseTime":1467377565,"sunsetTime":1467430612,"moonPhase":0.9,"precipIntensity":0,"precipIntensityMax":0,"precipProbability":0,"temperatureMin":50.16,"temperatureMinTime":1467374400,"temperatureMax":70.97,"temperatureMaxTime":1467414000,"apparentTemperatureMin":50.16,"apparentTemperatureMinTime":1467374400,"apparentTemperatureMax":70.97,"apparentTemperatureMaxTime":1467414000,"dewPoint":50.69,"humidity":0.72,"windSpeed":5.69,"windBearing":219,"cloudCover":0,"pressure":1008.5,"ozone":305.13},{"time":1467442800,"summary":"Mostly cloudy until evening.","icon":"partly-cloudy-day","sunriseTime":1467463994,"sunsetTime":1467517004,"moonPhase":0.94,"precipIntensity":0.0003,"precipIntensityMax":0.0012,"precipIntensityMaxTime":1467478800,"precipProbability":0.02,"precipType":"rain","temperatureMin":49.79,"temperatureMinTime":1467464400,"temperatureMax":64.32,"temperatureMaxTime":1467500400,"apparentTemperatureMin":47.78,"apparentTemperatureMinTime":1467464400,"apparentTemperatureMax":64.32,"apparentTemperatureMaxTime":1467500400,"dewPoint":49.92,"humidity":0.78,"windSpeed":7.21,"windBearing":213,"cloudCover":0.34,"pressure":1011.01,"ozone":300.33},{"time":1467529200,"summary":"Mostly cloudy until afternoon.","icon":"partly-cloudy-day","sunriseTime":1467550424,"sunsetTime":1467603395,"moonPhase":0.98,"precipIntensity":0.0003,"precipIntensityMax":0.0009,"precipIntensityMaxTime":1467561600,"precipProbability":0.01,"precipType":"rain","temperatureMin":50.72,"temperatureMinTime":1467554400,"temperatureMax":67.02,"temperatureMaxTime":1467586800,"apparentTemperatureMin":50.72,"apparentTemperatureMinTime":1467554400,"apparentTemperatureMax":67.02,"apparentTemperatureMaxTime":1467586800,"dewPoint":50.65,"humidity":0.77,"windSpeed":5.94,"windBearing":207,"cloudCover":0.45,"pressure":1012.37,"ozone":299.21},{"time":1467615600,"summary":"Clear throughout the day.","icon":"clear-day","sunriseTime":1467636855,"sunsetTime":1467689784,"moonPhase":0.02,"precipIntensity":0,"precipIntensityMax":0,"precipProbability":0,"temperatureMin":51.06,"temperatureMinTime":1467633600,"temperatureMax":71.36,"temperatureMaxTime":1467669600,"apparentTemperatureMin":51.06,"apparentTemperatureMinTime":1467633600,"apparentTemperatureMax":71.36,"apparentTemperatureMaxTime":1467669600,"dewPoint":50.47,"humidity":0.71,"windSpeed":5.41,"windBearing":222,"cloudCover":0,"pressure":1012.45,"ozone":300.06}]},"flags":{"sources":["darksky","lamp","gfs","cmc","nam","rap","rtma","sref","fnmoc","isd","nwspa","madis","nearest-precip"],"darksky-stations":["KDAX"],"lamp-stations":["KAPC","KCCR","KHWD","KLVK","KNUQ","KOAK","KPAO","KSFO","KSQL"],"isd-stations":["724943-99999","745039-99999","745065-99999","994016-99999","998479-99999"],"madis-stations":["AU915","C5988","C8158","C9629","CQ147","CQ188","D5422","E0426","E6067","E9227","FTPC1","GGBC1","OKXC1","PPXC1","PXOC1","SFOC1"],"units":"us"}}')
@hourly = @forecast['hourly']
@data = @hourly['data']
@current_hour = 0
@current_hour_data = @data[@current_hour]
time_sec = 0

def increasing_temp
  current_temp = @current_hour_data["temperature"]
  next_hour_data = @data[@current_hour+1]
  sum = 0
  included = 0
  for i in 2..4
    if(next_hour_data["temperature"] != nil)
      sum += next_hour_data["temperature"]
      next_hour_data = @data[@current_hour+i]
      included += 1
    end
  end
  average_temp = sum/included
  average_temp > current_temp
end

SCHEDULER.every '2s' do
  time_sec += 2
  if time_sec >= 1800
    time_sec = 0
    @current_hour += 1
    @current_hour_data = @data[current_hour]
  end
  send_event('temperature', { current: @current_hour_data["temperature"], increasing: increasing_temp })
end
